ZPLUG_PROTOCOL=ssh

zplug "zplug/zplug", hook-build:'zplug --self-manage'

zplug "zsh-users/zsh-completions"
zplug "zsh-users/zsh-syntax-highlighting", defer:2

zplug "yonchu/zsh-vcs-prompt", use:zshrc.sh

zplug "b4b4r07/enhancd", use:init.sh

# require sqlite3 packages?
zplug 'b4b4r07/zsh-history', \
    defer:3, \
    if:"which go", \
    use:init.zsh, \
    hook-build:"
        go get -d
        go build -o zhist cmd/zhist/main.go
        install -m 0755 zhist ~/bin
    "

if zplug check 'b4b4r07/zsh-history'; then
    export ZSH_HISTORY_FILE="$HOME/.zsh_history.db"
    ZSH_HISTORY_KEYBIND_GET_BY_DIR="^r"
    ZSH_HISTORY_KEYBIND_GET_ALL="^r^a"
    ZSH_HISTORY_KEYBIND_SCREEN="^r^r"
    ZSH_HISTORY_KEYBIND_ARROW_UP="^p"
    ZSH_HISTORY_KEYBIND_ARROW_DOWN="^n"
fi
